#!/usr/bin/env node
module.exports=function(e){var r={};function t(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";var s=t(1).version,a=t(2),n=t(3).validateFile;a.version(s).arguments("<filePath>").description("Validate embedded examples in Swagger-JSONs").action(function(e){return function(e){var r=n(e);t=r.statistics,s=["Response schemas with examples found: "+t.responseSchemasWithExamples,"Response examples without schema found: "+t.responseExamplesWithoutSchema,"Total examples found: "+t.responseExamplesTotal].join("\n"),process.stdout.write(s+"\n"),r.valid&&(process.stdout.write("\nNo errors found.\n\n"),process.exit(0));var t,s;process.stdout.write("\nErrors found.\n\n"),process.stderr.write(JSON.stringify(r.errors,null,"    ")),process.exit(1)}(e)}),a.parse(process.argv)},function(e,r){e.exports={name:"swagger-examples-validator",version:"0.5.1",description:"Validates embedded examples in Swagger-JSONs",main:"dist/index.js",bin:{"swagger-examples-validator":"dist/cli.js"},scripts:{build:"npm run build:clean && npm run build:webpack","build:clean":"rimraf dist","build:webpack":"webpack --bail --progress --profile --config ./webpack/config.babel.js",coverage:'rimraf ./coverage && nyc --reporter=lcov --reporter=text -x "dist/**/*" -x "test/**/*.js" npm test',coveralls:"cat ./coverage/lcov.info | coveralls",test:"npm run build && npm run test:mocha","test:mocha":'BABEL_DISABLE_CACHE=1 mocha --require "babel-register" --require "./test/util/setup-tests" --recursive "./test/specs/**/*.js"',release:"npm run build && npm run release:stage-artifacts && standard-version -a","release:stage-artifacts":"git add dist/*"},repository:{type:"git",url:"git+https://github.com/codekie/swagger-examples-validator.git"},keywords:["swagger","json","validate","examples"],author:"Josua Amann",license:"MIT",bugs:{url:"https://github.com/codekie/swagger-examples-validator/issues"},homepage:"https://github.com/codekie/swagger-examples-validator#readme",devDependencies:{"babel-cli":"^6.26.0","babel-core":"^6.26.0","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-plugin-transform-es2015-classes":"^6.24.1","babel-plugin-transform-es2015-parameters":"^6.24.1","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-polyfill":"^6.26.0","babel-preset-es2015":"^6.24.1","babel-preset-es2015-webpack":"6.4.3","babel-register":"^6.26.0",chai:"^4.1.2",coveralls:"^3.0.0",eslint:"^4.17.0","eslint-loader":"^1.9.0","json-loader":"^0.5.7",mocha:"^5.0.1","mocha-lcov-reporter":"^1.3.0",nyc:"^11.4.1",rimraf:"^2.6.2","standard-version":"^4.3.0","uglifyjs-webpack-plugin":"1.1.8",webpack:"^3.11.0"},dependencies:{ajv:"^6.1.1",commander:"^2.14.1","jsonpath-plus":"0.16.0"}}},function(e,r){e.exports=require("commander")},function(e,r,t){"use strict";function s(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var a=t(4),n=t(5),o=t(6);r.default=p,r.validateFile=function(e){return p(JSON.parse(a.readFileSync(e,"utf-8")))};var i="schema",l="examples",c="$.."+l+".application/json";function p(e){return function(e,r){var t=new o({allErrors:!0}),a=function(e){return e.reduce(function(e,r){var t=function(e){var r=n.toPathArray(e).slice(),t=r.lastIndexOf(l);return r.splice(t,r.length-t,i),n.toPathString(r)}(r);return e[t]=r,e},{})}(e),c=Object.keys(a),p=(m={schemaPaths:c},{responseSchemasWithExamples:m.schemaPaths.length,responseExamplesTotal:0,responseExamplesWithoutSchema:0}),d={valid:!0,statistics:p};var m;return c.forEach(function(e){var o,i=function(e){var r=e.validator,t=e.jsonSchema,a=e.pathResponseSchema,o=e.pathExample,i=e.statistics,l=[],c=u(a,t),p=u(o,t);return p&&i.responseExamplesTotal++,c?!p||r.validate(c,p)?l:l.concat.apply(l,s(r.errors.map(function(e){return e.examplePath=n.toPointer(n.toPathArray(o)),e}))):(i.responseSchemasWithExamples--,i.responseExamplesWithoutSchema++,l)}({validator:t,jsonSchema:r,pathResponseSchema:e,pathExample:a[e],statistics:p});if(i.length){d.valid=!1;var l=d.errors;l||(l=[],d.errors=l),(o=d.errors).splice.apply(o,[l.length-1,0].concat(s(i)))}}),d}(function(e){return n({json:e,path:c,resultType:"path"})}(e),e)}function u(e,r){return n({json:r,path:e,flatten:!0,wrap:!1,resultType:"value"})}},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("jsonpath-plus")},function(e,r){e.exports=require("ajv")}]);
//# sourceMappingURL=cli.js.map