#!/usr/bin/env node
module.exports=function(e){function r(t){if(s[t])return s[t].exports;var a=s[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var s={};return r.m=e,r.c=s,r.p="",r(0)}([function(e,r,s){"use strict";function t(e){var r=l(e);a(r.statistics),r.valid&&(process.stdout.write("\nNo errors found.\n\n"),process.exit(0)),process.stdout.write("\nErrors found.\n\n"),process.stderr.write(JSON.stringify(r.errors,null,"    ")),process.exit(1)}function a(e){var r=["Response schemas with examples found: "+e.responseSchemasWithExamples,"Response examples without schema found: "+e.responseExamplesWithoutSchema,"Total examples found: "+e.responseExamplesTotal].join("\n");process.stdout.write(r+"\n")}var n=s(1).version,i=s(2),o=s(3),l=o.validateFile;i.version(n).arguments("<filePath>").description("Validate embedded examples in Swagger-JSONs").action(function(e){return t(e)}),i.parse(process.argv)},function(e,r){e.exports={name:"swagger-examples-validator",version:"0.3.1",description:"Validates embedded examples in Swagger-JSONs",main:"dist/index.js",bin:{"swagger-examples-validator":"dist/cli.js"},scripts:{build:"npm run build:clean && npm run build:webpack","build:clean":"rimraf dist","build:webpack":"webpack --bail --progress --profile --config ./webpack/config.babel.js",coverage:'rimraf ./coverage && nyc --reporter=lcov --reporter=text -x "dist/**/*" -x "test/**/*.js" npm test',test:"npm run build && npm run test:mocha","test:mocha":'BABEL_DISABLE_CACHE=1 mocha --require "babel-register" --require "./test/util/setup-tests" --recursive "./test/specs/**/*.js"',release:"npm run build && npm run release:stage-artifacts && standard-version -a","release:stage-artifacts":"git add dist/*"},repository:{type:"git",url:"git+https://github.com/codekie/swagger-examples-validator.git"},keywords:["swagger","json","validate","examples"],author:"Josua Amann",license:"MIT",bugs:{url:"https://github.com/codekie/swagger-examples-validator/issues"},homepage:"https://github.com/codekie/swagger-examples-validator#readme",devDependencies:{"babel-cli":"6.18.0","babel-core":"6.21.0","babel-eslint":"7.1.1","babel-loader":"6.2.10","babel-plugin-transform-es2015-classes":"6.18.0","babel-plugin-transform-es2015-parameters":"6.21.0","babel-plugin-transform-object-rest-spread":"6.20.2","babel-polyfill":"6.20.0","babel-preset-es2015":"6.18.0","babel-preset-es2015-webpack":"6.4.3","babel-register":"6.18.0",chai:"3.5.0",eslint:"3.13.1","eslint-loader":"1.6.1","json-loader":"0.5.4",mocha:"3.2.0",nyc:"10.0.0",rimraf:"2.5.4","standard-version":"4.0.0",webpack:"1.14.0"},dependencies:{ajv:"4.10.4",commander:"2.9.0","jsonpath-plus":"0.15.0"}}},function(e,r){e.exports=require("commander")},function(e,r,s){"use strict";function t(e){if(Array.isArray(e)){for(var r=0,s=Array(e.length);r<e.length;r++)s[r]=e[r];return s}return Array.from(e)}function a(e){var r=i(e);return o(r,e)}function n(e){var r=JSON.parse(h.readFileSync(e,"utf-8"));return a(r)}function i(e){return b({json:e,path:w,resultType:"path"})}function o(e,r){var s=f(),a=u(e),n=Object.keys(a),i=l({schemaPaths:n}),o={valid:!0,statistics:i};return n.forEach(function(e){var n,l=p(e,r),u=c(a[e],r),m=d({validator:s,schema:l,examples:u,statistics:i});if(i.responseExamplesTotal+=u.length,m.length){o.valid=!1;var f=o.errors;f||(f=[],o.errors=f),(n=o.errors).splice.apply(n,[f.length-1,0].concat(t(m)))}}),o}function l(e){var r=e.schemaPaths;return{responseSchemasWithExamples:r.length,responseExamplesTotal:0,responseExamplesWithoutSchema:0}}function p(e,r){return b({json:r,path:e,wrap:!1,resultType:"value"})}function c(e,r){var s=b({json:r,path:e,flatten:!0,wrap:!1,resultType:"value"});return Array.isArray(s)?s:[s]}function u(e){return e.reduce(function(e,r){var s=m(r);return e[s]=r,e},{})}function d(e){var r=e.validator,s=e.schema,a=e.examples,n=e.statistics,i=[];return s?a.reduce(function(e,a){var n=r.validate(s,a);return n?e:e.concat.apply(e,t(r.errors))},i):(n.responseSchemasWithExamples--,n.responseExamplesWithoutSchema++,i)}function m(e){var r=b.toPathArray(e).slice(),s=r.lastIndexOf(x);return r.splice(s,r.length-s,v),r.length&&"$"!==r[0]&&r.splice(0,0,"$"),b.toPathString(r)}function f(){return new g({allErrors:!0})}Object.defineProperty(r,"__esModule",{value:!0});var h=s(4),b=s(5),g=s(6);r.default=a,r.validateFile=n;var v="schema",x="examples",w="$.."+x+".application/json"},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("jsonpath-plus")},function(e,r){e.exports=require("ajv")}]);
//# sourceMappingURL=cli.js.map