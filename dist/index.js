module.exports=function(r){var t={};function e(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return r[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=0)}([function(r,t,e){"use strict";var n=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],n=!0,a=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(n=(u=s.next()).done)&&(e.push(u.value),!t||e.length!==t);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}var o=e(1),u=e(2),s=e(3),i=e(4),c=e(5).custom.createError,l="schema",p="examples",f="$.."+p+".application/json",h="Validation",m=c("JsonPathNotFound");function v(r){return function(r,t){var e=O(),n=function(r){return r.reduce(function(r,t){var e=function(r){var t=s.toPathArray(r).slice(),e=t.lastIndexOf(p);return t.splice(e,t.length-e,l),s.toPathString(t)}(t);return r[e]=t,r},{})}(r),o=Object.keys(n),u=S({schemaPaths:o}),i={valid:!0,statistics:u,errors:[]};return o.forEach(function(r){var o=i.errors,c=n[r],l=g(c,t),p=E(r,t,!0),f=P({validator:e,responseSchema:p,example:l,statistics:u}).map(function(r){return r.examplePath=s.toPointer(s.toPathArray(c)),r});f.length&&(i.valid=!1,o.splice.apply(o,[o.length-1,0].concat(a(f))))}),i}(function(r){return s({json:r,path:f,resultType:"path"})}(r),r)}function y(r,t){var e=S({schemaPaths:r});return x({errors:t(e),statistics:e})}function d(r){var t=r.code,e=r.message,n=r.path,a=r.cause,u=t||r.type||h,s={type:u,message:e};return h===u?o.merge(s,r):(n&&o.merge(s,{params:{path:n}}),a&&o.merge(s,a)),s}function x(r){var t=r.errors,e=r.statistics,n=void 0===e?{}:e;return{valid:!t.length,statistics:n,errors:t}}function S(r){return{responseSchemasWithExamples:r.schemaPaths.length,responseExamplesTotal:0,responseExamplesWithoutSchema:0}}function g(r,t){return s({json:t,path:r,flatten:!0,wrap:!1,resultType:"value"})}function P(r){var t=r.validator,e=r.responseSchema,n=r.example,o=r.statistics,u=[];return o.responseExamplesTotal++,e?t.validate(e,n)?u:u.concat.apply(u,a(t.errors.map(d))):(o.responseSchemasWithExamples--,o.responseExamplesWithoutSchema++,u)}function O(){return new i({allErrors:!0})}function E(r,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=g(r,t);if(!e&&!n)throw new m("Path to response-schema can't be found: '"+r+"'",{params:{path:r}});return n}r.exports={default:v,validateFile:function(r){var t=null;try{t=JSON.parse(u.readFileSync(r,"utf-8"))}catch(r){return x({errors:[d(r)]})}return v(t)},validateExample:function(r,t,e){var n=null,a=null,o=null;try{n=JSON.parse(u.readFileSync(e,"utf-8")),o=JSON.parse(u.readFileSync(r,"utf-8")),a=E(t,o)}catch(r){return x({errors:[d(r)]})}return y([t],function(r){return P({validator:O(),responseSchema:a,example:n,statistics:r}).map(function(r){return r.exampleFilePath=e,r})})},validateExamplesByMap:function(r,t){var e=null,a=null;try{e=JSON.parse(u.readFileSync(t,"utf-8")),a=JSON.parse(u.readFileSync(r,"utf-8"))}catch(r){return x({errors:[d(r)]})}return y(Object.keys(e),function(r){return o(e).entries().flatMap(function(e){var s=n(e,2),i=s[0],c=s[1],l=null;try{l=E(i,a)}catch(r){return r.cause.mapFilePath=t,d(r)}return o([c]).flatten().flatMap(function(t){var e=null;try{e=JSON.parse(u.readFileSync(t,"utf-8"))}catch(r){return d(r)}return P({validator:O(),responseSchema:l,example:e,statistics:r}).map(function(r){return r.exampleFilePath=t,r})}).toArray().forEach(function(r){return Object.assign(r,{mapFilePath:t})})}).value()})}}},function(r,t){r.exports=require("lodash")},function(r,t){r.exports=require("fs")},function(r,t){r.exports=require("jsonpath-plus")},function(r,t){r.exports=require("ajv")},function(r,t){r.exports=require("errno")}]);