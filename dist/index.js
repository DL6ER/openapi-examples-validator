module.exports=function(r){var t={};function e(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return r[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=2)}([function(r,t){r.exports=require("lodash")},function(r,t){r.exports=require("errno")},function(r,t,e){"use strict";var n=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],n=!0,a=!1,o=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(r){a=!0,o=r}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}var o=e(0),i=e(3),s=e(4),u=e(5),c=e(6),l=e(7),p=e(1).custom.createError,f=e(8),h=f.ERR_TYPE__JSON_PATH_NOT_FOUND,m="schema",v="examples",d="$.."+v+".application/json",y=p(h);function x(r){return function(r,t){var e=_(),n=function(r){return r.reduce(function(r,t){var e=function(r){var t=c.toPathArray(r).slice(),e=t.lastIndexOf(v);return t.splice(e,t.length-e,m),c.toPathString(t)}(t);return r[e]=t,r},{})}(r),o=Object.keys(n),i=O({schemaPaths:o}),s={valid:!0,statistics:i,errors:[]};return o.forEach(function(r){var o=s.errors,u=n[r],l=P(u,t),p=T(r,t,!0),f=S({validator:e,responseSchema:p,example:l,statistics:i}).map(function(r){return r.examplePath=c.toPointer(c.toPathArray(u)),r});f.length&&(s.valid=!1,o.splice.apply(o,[o.length-1,0].concat(a(f))))}),s}(function(r){return c({json:r,path:d,resultType:"path"})}(r),r)}function E(r,t){var e=O({schemaPaths:r});return g({errors:t(e),statistics:e})}function g(r){var t=r.errors,e=r.statistics,n=void 0===e?{}:e;return{valid:!t.length,statistics:n,errors:t}}function O(r){return{responseSchemasWithExamples:r.schemaPaths.length,responseExamplesTotal:0,responseExamplesWithoutSchema:0}}function P(r,t){return c({json:t,path:r,flatten:!0,wrap:!1,resultType:"value"})}function S(r){var t=r.validator,e=r.responseSchema,n=r.example,o=r.statistics,i=[];return o.responseExamplesTotal++,e?t.validate(e,n)?i:i.concat.apply(i,a(t.errors.map(f.create))):(o.responseSchemasWithExamples--,o.responseExamplesWithoutSchema++,i)}function _(){return new l({allErrors:!0})}function T(r,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=P(r,t);if(!e&&!n)throw new y("Path to response-schema can't be found: '"+r+"'",{params:{path:r}});return n}r.exports={default:x,validateFile:function(r){var t=null;try{t=JSON.parse(i.readFileSync(r,"utf-8"))}catch(r){return g({errors:[f.create(r)]})}return x(t)},validateExample:function(r,t,e){var n=null,a=null,o=null;try{n=JSON.parse(i.readFileSync(e,"utf-8")),o=JSON.parse(i.readFileSync(r,"utf-8")),a=T(t,o)}catch(r){return g({errors:[f.create(r)]})}return E([t],function(r){return S({validator:_(),responseSchema:a,example:n,statistics:r}).map(function(r){return r.exampleFilePath=e,r})})},validateExamplesByMap:function(r,t){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cwdToMappingFile,a=0,c=u.sync(t,{nonull:!0}).map(function(t){var u=null,c=null;try{u=JSON.parse(i.readFileSync(t,"utf-8")),c=JSON.parse(i.readFileSync(r,"utf-8"))}catch(r){return g({errors:[f.create(r)]})}return a++,E(Object.keys(u),function(r){return function(r,t,e,a){var u=a.cwdToMappingFile,c=void 0!==u&&u,l=a.dirPathMapExternalExamples;return o(t).entries().flatMap(function(t){var a=n(t,2),u=a[0],p=a[1],h=null;try{h=T(u,r)}catch(r){return f.create(r)}return o([p]).flatten().flatMap(function(r){var t=null;try{var n=c?s.join(l,r):r;t=JSON.parse(i.readFileSync(n,"utf-8"))}catch(r){return f.create(r)}return S({validator:_(),responseSchema:h,example:t,statistics:e}).map(function(t){return t.exampleFilePath=r,t})}).value()}).value()}(c,u,r,{cwdToMappingFile:e,dirPathMapExternalExamples:s.dirname(t)}).map(function(r){return Object.assign(r,{mapFilePath:t})})})});return o.merge(c.reduce(function(r,t){return r?(a=t,g({errors:(e=r).errors.concat(a.errors),statistics:o.entries(e.statistics).reduce(function(r,t){var e=n(t,2),o=e[0],i=e[1];return r[o]=i+a.statistics[o],r},O({schemaPaths:[]}))})):t;var e,a},null),{statistics:{matchingFilePathsMapping:a}})}}},function(r,t){r.exports=require("fs")},function(r,t){r.exports=require("path")},function(r,t){r.exports=require("glob")},function(r,t){r.exports=require("jsonpath-plus")},function(r,t){r.exports=require("ajv")},function(r,t,e){"use strict";var n=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r};var a=e(0),o=e(1).code.ENOENT,i=function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Object.assign(this,n({type:t},e))}return r.create=function(t){var e=r.ERR_TYPE__VALIDATION,n=t.code,o=t.message,i=t.path,s=t.cause,u=n||t.type||e,c={message:o};return e===u?a.merge(c,t):(i&&a.merge(c,{params:{path:i}}),s&&a.merge(c,s)),new r(u,c)},r}();r.exports=i,i.ERR_TYPE__VALIDATION="Validation",i.ERR_TYPE__JSON_PATH_NOT_FOUND="JsonPathNotFound",i.ERR_TYPE__JS_ENOENT=o.code}]);